---
import { actions } from "astro:actions";
import type { IMateriasObject } from "../schemas/materias";
import { getBestPath, getBestPathIntesivo, getDesbloqueablesDeMateria, getMateriasByDepartamento, getMateriasByNucleo, getMateriasHuerfanas, getPrelacionesDeMateria, getRemainingSemestres } from "../utils/graph";
import { de } from "zod/v4/locales";


const m = await Astro.callAction(actions.materias.getAll, {} );
const materias = m.data as IMateriasObject;


let prelaciones: string[] = [];
let desbloqueables: string[] = [];

let prelacionesFiltered: string[] = [];
let desbloqueablesFiltered: string[] = [];

// console.log('Prelaciones de la materia:',materias['0826201T'].nombre);
// getPrelacionesDeMateria(materias, '0826201T', prelaciones);
// prelacionesFiltered = prelaciones.filter((codigo, index) => prelaciones.indexOf(codigo) === index);
// console.log('Prelaciones:', prelacionesFiltered);

// console.log('Desbloqueables de la materia:',materias['0826201T'].nombre);
// getDesbloqueablesDeMateria(materias, '0826201T', desbloqueables);
// desbloqueablesFiltered = desbloqueables.filter((codigo, index) => desbloqueables.indexOf(codigo) === index);
// console.log('Desbloqueables filtrados:', desbloqueablesFiltered);

// console.log('Materias del Departamento de Ciencia Sociales:');
// console.log(getMateriasByDepartamento(materias, 'Departamento de Ciencia Sociales'));

// console.log('Materias del Nucleo de Tecnología básicas')
// console.log(getMateriasByNucleo(materias,"Tecnología básicas"))


// console.log(`Mejor semestre tomando como materias base: \n${materias['0826301T'].nombre} \n${materias['0846302T'].nombre} \n${materias['0416304T'].nombre} \n${materias['1013401T'].nombre} \n${materias['1012207T'].nombre}  \ny un máximo de 17 UC`);
// console.log(getBestPath(materias, ['0826301T','0846302T','0416304T','1013401T','1012207T'], 17));

// console.log(`Mejor semestre tomando como materias base: \n${materias['0826301T'].nombre} \n${materias['0846302T'].nombre} \n${materias['0842303L'].nombre} \n${materias['1013401T'].nombre} \n${materias['1023302T'].nombre} \n${materias['0415405T'].nombre} \n${materias['0423305T'].nombre}  \ny un máximo de 19 UC`);
// console.log(getBestPath(materias, ['0826301T','0846302T','0842303L','1013401T','1023302T','0415405T', '0423305T'], 19));

// console.log(`Mejor intensivo tomando como materias base: \n${materias['0826301T'].nombre} \n${materias['0846302T'].nombre} \n${materias['0842303L'].nombre} \n${materias['1013401T'].nombre} \n${materias['1023302T'].nombre} \n${materias['0415405T'].nombre} \n${materias['0423305T'].nombre}  \ny un máximo de 7 UC`);
// console.log(getBestPathIntesivo(materias, ['0826301T','0846302T','0842303L','1013401T','1023302T','0415405T', '0423305T'], 7));

// console.log('semestres restantes: ', getRemainingSemestres(materias, ['0826301T','0846302T','0842303L','1013401T','1023302T','0415405T', '0423305T']))

console.log(`Mejor semestre tomando como materias base: \n${materias['1023111T'].nombre},  ${materias['1012207T'].nombre},  ${materias['1023302T'].nombre} \n${materias['1000003T'].nombre},  ${materias['1000000T'].nombre},  ${materias['1000001T'].nombre} \n${materias['1032109T'].nombre},  ${materias['1032301T'].nombre},  ${materias['0914201T'].nombre} \n ${materias['0425601T'].nombre},  ${materias['0435607T'].nombre},  ${materias['0435606T'].nombre} \n${materias['0425701T'].nombre},  ${materias['0423804T'].nombre} \ny un máximo de 19 UC con 112 uc aprobadas`);
console.log(getBestPath(materias, ['1023111T','1012207T','1023302T','1032301T', '1032109T', '1000003T','1000000T','1000001T', '0914201T','0425601T','0435607T','0435606T','0425701T','0423804T'], 19, 112));

// console.log(`Mejor semestre tomando como materias base: \n${materias['0826301T'].nombre} \n${materias['0134805T'].nombre} \n${materias['0416304T'].nombre} \n${materias['0423305T'].nombre} \n${materias['0834405T'].nombre} \n${materias['0842303L'].nombre} \n${materias['0846302T'].nombre} \n${materias['1032301T'].nombre} \n${materias['1032601T'].nombre} \ny un máximo de 12 UC`);
// console.log(getBestPath(materias, ['0826301T','0134805T','0416304T','0423305T','0834405T','0842303L','0846302T', '1032301T','1032601T'], 12));

// console.log(`Mejor semestre tomando como materias base: \n${materias['1023111T'].nombre} \n${materias['0412101T'].nombre} \n${materias['1032109T'].nombre} \n${materias['0826201T'].nombre} \n${materias['0846203T'].nombre} \n${materias['0834102T'].nombre} \n${materias['0415102T'].nombre} \n${materias['0914201T'].nombre} \n${materias['0842204L'].nombre} \ny un máximo de 12 UC`);
// console.log(getBestPath(materias, ['0412101T','1023111T', '1032109T','0826201T','0846203T','0834102T','0415102T','0914201T','0842204L'], 21, 20));

// let materiasHuerfanas = getMateriasHuerfanas(materias);
// console.log('Materias huérfanas: ', materiasHuerfanas);

---	