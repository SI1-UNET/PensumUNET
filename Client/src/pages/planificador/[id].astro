---
import { actions } from "astro:actions";
import type { ICarrera, IMateriasObject } from "../../schemas/materias";
import "../../styles/global.css";
import Layout from "../../layouts/Layout.astro";
import { GraphPlanner } from "../../components/graph";


const { id } = Astro.params;
const m = await Astro.callAction(actions.materias.getAllMateriasByCarrera, {id:id!} );
const materias = m.data as IMateriasObject;

const c = await Astro.callAction(actions.carreras.get, {});
const carreras = await c.data;

let uc_total: number = 0;

carreras.forEach((carreras: ICarrera) => {
    if(carreras.id === parseInt(id!)) {
      uc_total = carreras.uc_total;
    }
 });

---	
<Layout>
  <GraphPlanner materias={materias} uc_total={uc_total} client:load/>
</Layout>

